const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/markdown-Cr4Hflqh.js","assets/markdown-BMSQkwth.js","assets/highlight-oFPFMupF.js","assets/mermaid-C-v3_poi.js","assets/d3--x_RIlPQ.js"])))=>i.map(i=>d[i]);
import{_ as P}from"./mermaid-C-v3_poi.js";import{_ as te,u as se,a as ae,s as ie,b as ne,T as oe,R,c as re}from"./index-D9oogZme.js";import{v as ce,d as v,r as y,a as ue,n as $,o as de,B as n,L as H,D as l,E as f,F as b,I as g,G as o,y as u,J as me,K as ve,N as U,M as z,C as a}from"./pdf-CVzfGURS.js";import"./d3--x_RIlPQ.js";import"./highlight-oFPFMupF.js";import"./fancyapps-B9LBmYJj.js";import"./gsap-COmk0yTM.js";const fe={class:"mil-content-frame"},pe={class:"mil-scroll mil-half-1 mil-bp-fix-2"},ge={key:0,class:"mil-main-content"},he={class:"mil-banner"},ke={class:"mil-bg-frame"},_e=["src"],ye={class:"mil-banner-content mil-type-2"},be={class:"mil-journal-meta mil-mb-20"},Ce={class:"mil-link"},Le={key:0,class:"mil-meta-divider"},we={key:1},Te={key:2,class:"mil-meta-divider"},xe={key:3},Be={class:"mil-lang-switch mil-mt-20"},Fe={class:"mil-space-90 mil-p-90-75"},Ae=["innerHTML"],Ee={class:"mil-toc-menu mil-up-instant"},De={class:"mil-toc-list mil-scroll"},Se=["onClick"],je={class:"mil-soft"},Me={key:1,class:"mil-p-90-75"},Re={class:"mil-bottom-panel mil-up-instant"},ze={class:"mil-jcc mil-space-15 mil-w-100"},Ne={class:"mil-jcb mil-w-100 mil-p-30-0"},Ve={class:"mil-prev-nav"},Ie={key:1,class:"mil-link mil-disabled",style:{opacity:"0.5"}},Oe={class:"mil-bottom-centered"},Pe={class:"mil-next-nav"},$e={key:1,class:"mil-link mil-disabled",style:{opacity:"0.5"}},He={class:"mil-action-list"},Ue=["title"],Je=["title"],Ze={key:0,class:"mil-toc-dot"},qe={__name:"JournalDetail",setup(Ge){const C=ce(null);let L;const N=async()=>{if(!C.value){const t=await P(()=>import("./markdown-Cr4Hflqh.js"),__vite__mapDeps([0,1,2]));C.value=t.default}},V=async()=>{L||(L=(await P(()=>import("./mermaid-C-v3_poi.js").then(e=>e.m),__vite__mapDeps([3,4,2]))).default,L.initialize({startOnLoad:!1,theme:"base",themeVariables:{darkMode:!0,fontFamily:'"Outfit", sans-serif',fontSize:"14px",primaryColor:"#FFFFFF",primaryTextColor:"#121212",primaryBorderColor:"#DBA91C",nodeBorder:"#DBA91C",mainBkg:"#FFFFFF",rectRadius:"8",lineColor:"#DBA91C",defaultLinkColor:"#DBA91C",edgeLabelBackground:"#DBA91C",labelTextColor:"#121212",clusterBkg:"rgba(255, 255, 255, 0.05)",clusterBorder:"#444444",secondaryColor:"#DBA91C",tertiaryColor:"#1A1A1A",titleColor:"#E0E0E0"},flowchart:{htmlLabels:!0,curve:"basis"},securityLevel:"loose"})),await L.run()},J=ne(),Z=re(),{posts:F,getAdjacentPosts:q}=se(),h=ae(),{currentLang:d}=ie(h),w=v(()=>J.params.id),s=v(()=>F.value.find(t=>t.slug===w.value&&t.type==="journal"&&t.lang===d.value)),T=q(w.value,"journal",d.value),A=v(()=>F.value.some(t=>t.slug===w.value&&t.type==="journal"&&t.lang==="en")),E=v(()=>F.value.some(t=>t.slug===w.value&&t.type==="journal"&&t.lang==="zh")),I=t=>{t==="zh"&&E.value&&h.setLang("zh"),t==="en"&&A.value&&h.setLang("en")},D=v(()=>d.value==="en"?E.value:d.value==="zh"?A.value:!1),G=()=>{D.value&&(d.value==="zh"?h.setLang("en"):d.value==="en"&&h.setLang("zh"))},K=v(()=>s.value&&C.value?C.value.render(s.value.body):""),W=v(()=>{if(!s.value||!s.value.date)return"";const t=new Date(s.value.date),e=t.getFullYear(),i=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");return`${e}-${i}-${r}`}),x=v(()=>{if(!s.value)return[];const t=[];return s.value.body.split(`
`).forEach(i=>{const r=i.match(/^(#{1,6})\s+(.+)$/);if(r){const c=r[1].length,B=r[2].trim(),_=B.toLowerCase().trim().replace(/[^\u4e00-\u9fa5a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");t.push({level:c,title:B,slug:_})}}),t}),p=y(!1),m=y(!1),k=y(!1),S=()=>{p.value=!p.value,p.value&&(m.value=!1)},Y=()=>{m.value=!m.value,m.value&&(p.value=!1)},Q=t=>{const e=document.getElementById(t);e&&(e.scrollIntoView({behavior:"smooth"}),p.value=!1)},X=()=>{k.value=!k.value,k.value?(document.body.classList.remove("mil-half-page"),document.body.classList.add("mil-fw-page")):(document.body.classList.remove("mil-fw-page"),document.body.classList.add("mil-half-page"))},j=y(!1),M=y(null),ee=()=>{navigator.clipboard.writeText(window.location.href),j.value=!0,M.value&&M.value.show("Link copied to clipboard","success"),setTimeout(()=>{j.value=!1},2e3)},le=t=>{const e=t.target.closest("a");if(e&&e.getAttribute("href")){const i=new URL(e.href),r=window.location.origin;if(i.origin===r){let c=i.pathname;if(c.endsWith(".md")){t.preventDefault();const B=c.split("/"),_=decodeURIComponent(B.pop().replace(".md",""));c.includes("/journal/")?c="/journal/"+_:c.includes("/portfolio/")?c="/portfolio/"+_:c="/blog/"+_,Z.push(c)}}else e.target="_blank"}},O=()=>{document.querySelectorAll(".copy-btn").forEach(e=>{e.addEventListener("click",()=>{const i=decodeURIComponent(e.getAttribute("data-code"));navigator.clipboard.writeText(i).then(()=>{const r=e.innerHTML;e.innerHTML='<i class="fas fa-check"></i> Copied',setTimeout(()=>{e.innerHTML=r},2e3)})})})};return ue(()=>{$(()=>{O(),N(),V()})}),de(()=>{$(()=>{O(),N(),V()})}),(t,e)=>(a(),n("div",fe,[H(oe,{ref_key:"toastRef",ref:M},null,512),l("div",pe,[s.value?(a(),n("div",ge,[l("div",he,[l("div",ke,[s.value.image?(a(),n("img",{key:0,src:s.value.image,alt:"banner",class:"mil-banner-bg mil-scale-img","data-value-1":"1","data-value-2":"1.3"},null,8,_e)):f("",!0)]),e[5]||(e[5]=l("div",{class:"mil-banner-overlay"},null,-1)),l("div",ye,[l("div",be,[l("span",Ce,b(W.value),1),s.value.weather?(a(),n("span",Le,"|")):f("",!0),s.value.weather?(a(),n("span",we,[e[2]||(e[2]=l("i",{class:"fas fa-cloud"},null,-1)),g(" "+b(s.value.weather),1)])):f("",!0),s.value.mood?(a(),n("span",Te,"|")):f("",!0),s.value.mood?(a(),n("span",xe,[e[3]||(e[3]=l("i",{class:"fas fa-smile"},null,-1)),g(" "+b(s.value.mood),1)])):f("",!0)]),l("h1",null,b(s.value.title),1),l("div",Be,[l("span",{class:o(["mil-lang-btn",{active:u(d)==="zh",disabled:!E.value}]),onClick:e[0]||(e[0]=i=>I("zh"))},"ZH",2),e[4]||(e[4]=l("span",{class:"mil-divider"},"/",-1)),l("span",{class:o(["mil-lang-btn",{active:u(d)==="en",disabled:!A.value}]),onClick:e[1]||(e[1]=i=>I("en"))},"EN",2)])])]),l("div",Fe,[l("div",{class:"mil-markdown-content mil-mb-60 mil-up",innerHTML:K.value,onClick:le},null,8,Ae)]),l("div",{class:o(["mil-toc-backdrop",{"mil-active":p.value}]),onClick:S},null,2),x.value.length>0?(a(),n("div",{key:0,class:o(["mil-toc-wrapper",{"mil-toc-active":p.value}])},[l("div",Ee,[e[8]||(e[8]=l("div",{class:"mil-sheet-handle"},null,-1)),l("div",{class:"mil-toc-header"},[e[7]||(e[7]=l("span",{class:"mil-link"},"Contents",-1)),l("div",{class:"mil-toc-close",onClick:S},[...e[6]||(e[6]=[l("i",{class:"fas fa-times"},null,-1)])])]),l("ul",De,[(a(!0),n(me,null,ve(x.value,i=>(a(),n("li",{key:i.slug,class:o(["mil-toc-item","mil-level-"+i.level]),onClick:r=>Q(i.slug)},[l("span",je,b(i.title),1)],10,Se))),128))])])],2)):f("",!0)])):(a(),n("div",Me,[...e[9]||(e[9]=[l("h1",null,"Entry not found",-1)])])),l("div",Re,[l("div",ze,[l("div",Ne,[l("div",{class:"mil-action-trigger mil-icon-btn",onClick:ee,title:"Copy Link",style:{"margin-right":"20px"}},[l("i",{class:o(["fas",j.value?"fa-check":"fa-share-alt"])},null,2)]),l("div",Ve,[u(T).prev?(a(),U(u(R),{key:0,to:"/journal/"+u(T).prev.slug,class:"mil-link mil-icon-link-left",title:"Previous Entry"},{default:z(()=>[...e[10]||(e[10]=[l("i",{class:"fas fa-chevron-left"},null,-1),g(),l("span",null,"Previous",-1)])]),_:1},8,["to"])):(a(),n("span",Ie,[...e[11]||(e[11]=[l("i",{class:"fas fa-chevron-left"},null,-1),g(),l("span",null,"Previous",-1)])]))]),l("div",Oe,[H(u(R),{to:"/journal",class:"mil-link mil-back-btn"},{default:z(()=>[...e[12]||(e[12]=[g("Back to Journal",-1)])]),_:1})]),l("div",Pe,[u(T).next?(a(),U(u(R),{key:0,to:"/journal/"+u(T).next.slug,class:"mil-link mil-icon-link",title:"Next Entry"},{default:z(()=>[...e[13]||(e[13]=[l("span",null,"Next",-1),g(),l("i",{class:"fas fa-chevron-right"},null,-1)])]),_:1},8,["to"])):(a(),n("span",$e,[...e[14]||(e[14]=[l("span",null,"Next",-1),g(),l("i",{class:"fas fa-chevron-right"},null,-1)])]))]),l("div",{class:o(["mil-action-menu-wrapper",{"mil-active":m.value}])},[l("div",He,[x.value.length>0?(a(),n("div",{key:0,class:"mil-action-btn",onClick:S,title:"Table of Contents"},[...e[15]||(e[15]=[l("i",{class:"fas fa-list-ul"},null,-1)])])):f("",!0),l("div",{class:o(["mil-action-btn",{"mil-disabled":!D.value}]),onClick:G,title:D.value?"Switch Language":"Translation not available"},[...e[16]||(e[16]=[l("i",{class:"fas fa-globe"},null,-1)])],10,Ue),l("div",{class:"mil-action-btn",onClick:X,title:k.value?"Original View":"Full Screen View"},[l("i",{class:o(["fas",k.value?"fa-compress-alt":"fa-expand-alt"])},null,2)],8,Je)]),l("div",{class:o(["mil-action-trigger mil-icon-btn",{"mil-active":m.value}]),onClick:Y},[l("i",{class:o(["fas",m.value?"fa-times":"fa-ellipsis-v"])},null,2),!m.value&&x.value.length>0?(a(),n("span",Ze)):f("",!0)],2)],2)])])])])]))}},tl=te(qe,[["__scopeId","data-v-2c3ad15d"]]);export{tl as default};
