import{_ as R,u as U,d as z,a as G,s as q,R as H}from"./index-D9oogZme.js";import{r as p,d as S,B as c,D as e,F as d,J as x,K as L,G as _,E as b,C as i,a as Q,n as K,w as X,L as Z,N as ee,M as te,I as A,y as ae}from"./pdf-CVzfGURS.js";import"./mermaid-C-v3_poi.js";import"./d3--x_RIlPQ.js";import"./highlight-oFPFMupF.js";import"./fancyapps-B9LBmYJj.js";import"./gsap-COmk0yTM.js";const se={class:"mil-journal-cal"},le={class:"mil-cal-header"},ne={class:"mil-cal-title"},oe={class:"mil-cal-grid"},ie=["onClick"],re={key:0},ce={__name:"JournalCalendar",props:{activeDates:{type:Set,default:()=>new Set}},emits:["select"],setup(V,{emit:E}){const C=V,M=E,v=p(new Date().getFullYear()),n=p(new Date().getMonth()),h=["January","February","March","April","May","June","July","August","September","October","November","December"],F=S(()=>`${h[n.value]} ${v.value}`),J=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I=S(()=>new Date(v.value,n.value+1,0).getDate()),$=S(()=>new Date(v.value,n.value,1).getDay()),N=S(()=>{const r=[];for(let l=0;l<$.value;l++)r.push({day:"",empty:!0});for(let l=1;l<=I.value;l++){const u=`${v.value}-${(n.value+1).toString().padStart(2,"0")}-${l.toString().padStart(2,"0")}`,y=C.activeDates.has(u);r.push({day:l,dateKey:u,hasEntry:y,empty:!1})}return r}),f=()=>{n.value===0?(n.value=11,v.value--):n.value--},w=()=>{n.value===11?(n.value=0,v.value++):n.value++},k=r=>{r.empty||!r.hasEntry||M("select",r.dateKey)};return(r,l)=>(i(),c("div",se,[e("div",le,[e("div",{class:"mil-cal-nav-btn",onClick:f},[...l[0]||(l[0]=[e("i",{class:"fas fa-chevron-left"},null,-1)])]),e("div",ne,d(F.value),1),e("div",{class:"mil-cal-nav-btn",onClick:w},[...l[1]||(l[1]=[e("i",{class:"fas fa-chevron-right"},null,-1)])])]),e("div",oe,[(i(),c(x,null,L(J,u=>e("div",{class:"mil-cal-head-cell",key:u},d(u),1)),64)),(i(!0),c(x,null,L(N.value,(u,y)=>(i(),c("div",{key:y,class:_(["mil-cal-cell",{"mil-empty":u.empty,"mil-has-entry":u.hasEntry}]),onClick:j=>k(u)},[u.empty?b("",!0):(i(),c("span",re,d(u.day),1))],10,ie))),128))])]))}},ue=R(ce,[["__scopeId","data-v-4cb3262c"]]),de={class:"mil-content-frame"},me={class:"mil-scroll mil-half-1 mil-bp-fix"},ve={class:"mil-journal-container"},fe={class:"mil-month-marker mil-up"},pe={class:"mil-entries-wrapper"},he={class:"mil-entry-content"},ye={class:"mil-entry-date"},ge={class:"mil-day"},_e={class:"mil-weekday"},ke={class:"mil-entry-info"},be={key:0,class:"mil-entry-meta"},Se={key:0},we={key:1},De={key:1},Ce={key:0,class:"mil-p-90-75"},Me={class:"mil-bottom-panel mil-up-instant"},$e={class:"mil-w-100 mil-list-footer"},xe={class:"mil-current-month-display"},Le={class:"mil-action-list"},Ee=["title"],Fe={class:"mil-calendar-modal"},Je={class:"mil-modal-body"},Ie={__name:"Journal",setup(V){const{getPosts:E}=U(),{initAnimations:C}=z(),M=G(),{currentLang:v}=q(M),n=p(!1),h=p(!1),F=()=>{n.value=!n.value},J=()=>{M.toggleLang()},I=()=>{h.value=!h.value,h.value?(document.body.classList.remove("mil-half-page"),document.body.classList.add("mil-fw-page")):(document.body.classList.remove("mil-fw-page"),document.body.classList.add("mil-half-page"))},$=E("journal"),N=S(()=>new Set($.value.filter(a=>a.lang===v.value).map(a=>{const t=new Date(a.date),m=t.getFullYear(),s=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0");return`${m}-${s}-${o}`}))),f=S(()=>{const a={};$.value.filter(o=>o.lang===v.value).forEach(o=>{const g=new Date(o.date),O=g.getFullYear(),B=g.getMonth()+1,D=`${O}-${B.toString().padStart(2,"0")}`;a[D]||(a[D]=[]),a[D].push(o)});const m=Object.keys(a).sort((o,g)=>g.localeCompare(o));let s=0;return m.map(o=>{const[g,O]=o.split("-"),B=new Date(g,O-1).toLocaleString("en-US",{month:"long"}),D=a[o].map(Y=>{const W=s%2===0?"left":"right";return s++,{...Y,layoutSide:W}});return{key:o,label:`${B} ${g}`,posts:D}})}),w=p(""),k=p(!1),r=p(null),l=p([]),u=(a,t)=>{a&&(a.dataset.monthKey=t,l.value.push(a))};Q(()=>{C(),f.value.length>0&&(w.value=f.value[0].label),r.value=new IntersectionObserver(a=>{a.forEach(t=>{if(t.isIntersecting){const m=t.target.dataset.monthKey,s=f.value.find(o=>o.key===m);s&&(w.value=s.label)}})},{rootMargin:"-40% 0px -40% 0px",threshold:0}),K(()=>{l.value.forEach(a=>r.value.observe(a))})});const y=()=>{k.value=!k.value},j=a=>new Date(a).getDate(),T=a=>new Date(a).toLocaleDateString("en-US",{weekday:"short"}),P=a=>{const t=document.getElementById("date-"+a);t&&(k.value=!1,t.scrollIntoView({behavior:"smooth",block:"center"}))};return X(f,async()=>{await K(),C(),l.value=[],r.value&&(r.value.disconnect(),K(()=>{l.value.forEach(a=>r.value.observe(a))}))}),(a,t)=>(i(),c("div",de,[e("div",me,[e("div",ve,[t[4]||(t[4]=e("div",{class:"mil-timeline-spine"},null,-1)),(i(!0),c(x,null,L(f.value,m=>(i(),c("div",{key:m.key,class:"mil-month-group",ref_for:!0,ref:s=>u(s,m.key)},[e("div",fe,[e("span",null,d(m.label),1)]),e("div",pe,[(i(!0),c(x,null,L(m.posts,(s,o)=>(i(),ee(ae(H),{key:s.slug,to:"/journal/"+s.slug,id:"date-"+s.date,class:_(["mil-journal-entry mil-up",s.layoutSide==="left"?"mil-left-entry":"mil-right-entry"])},{default:te(()=>[e("div",he,[e("div",ye,[e("span",ge,d(j(s.date)),1),e("span",_e,d(T(s.date)),1)]),e("div",ke,[e("h4",null,d(s.title),1),s.weather||s.mood?(i(),c("div",be,[s.weather?(i(),c("span",Se,[t[0]||(t[0]=e("i",{class:"fas fa-cloud"},null,-1)),A(" "+d(s.weather),1)])):b("",!0),s.mood?(i(),c("span",we,[t[1]||(t[1]=e("i",{class:"fas fa-smile"},null,-1)),A(" "+d(s.mood),1)])):b("",!0)])):b("",!0),s.description?(i(),c("p",De,d(s.description),1)):b("",!0)])]),t[2]||(t[2]=e("div",{class:"mil-timeline-dot"},null,-1))]),_:2},1032,["to","id","class"]))),128))])]))),128)),f.value.length===0?(i(),c("div",Ce,[...t[3]||(t[3]=[e("p",null,"No journal entries found.",-1)])])):b("",!0)]),e("div",Me,[e("div",$e,[e("div",{class:"mil-fixed-icon mil-left-icon",onClick:y,title:"Open Calendar"},[...t[5]||(t[5]=[e("i",{class:"fas fa-calendar-alt"},null,-1)])]),e("div",xe,[e("span",null,d(w.value),1)]),e("div",{class:_(["mil-action-menu-wrapper",{"mil-active":n.value}])},[e("div",Le,[e("div",{class:"mil-action-btn",onClick:J,title:"Switch Language"},[...t[6]||(t[6]=[e("i",{class:"fas fa-globe"},null,-1)])]),e("div",{class:"mil-action-btn",onClick:I,title:h.value?"Original View":"Full Screen View"},[e("i",{class:_(["fas",h.value?"fa-compress-alt":"fa-expand-alt"])},null,2)],8,Ee)]),e("div",{class:_(["mil-action-trigger mil-icon-btn",{"mil-active":n.value}]),onClick:F},[e("i",{class:_(["fas",n.value?"fa-times":"fa-ellipsis-v"])},null,2)],2)],2)])])]),e("div",{class:_(["mil-calendar-overlay",{"mil-active":k.value}])},[e("div",Fe,[e("div",{class:"mil-modal-header"},[t[8]||(t[8]=e("h5",null,"Journal Calendar",-1)),e("span",{class:"mil-close-btn",onClick:y},[...t[7]||(t[7]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",Je,[Z(ue,{activeDates:N.value,onSelect:P},null,8,["activeDates"])])]),e("div",{class:"mil-calendar-backdrop",onClick:y})],2)]))}},Re=R(Ie,[["__scopeId","data-v-76ea4f37"]]);export{Re as default};
