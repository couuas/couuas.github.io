const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/markdown-Cr4Hflqh.js","assets/markdown-BMSQkwth.js","assets/highlight-oFPFMupF.js","assets/mermaid-C-v3_poi.js","assets/d3--x_RIlPQ.js"])))=>i.map(i=>d[i]);
import{_ as Y}from"./mermaid-C-v3_poi.js";import{_ as ie,u as oe,a as ae,s as ne,b as ce,T as re,R as N,c as ue}from"./index-D9oogZme.js";import{r as v,a as J,B as o,D as e,E as f,N as H,y as m,Y as de,F as _,C as t,v as me,d as w,n as Z,o as ve,L as I,G as d,J as fe,K as pe,I as b,M as O}from"./pdf-CVzfGURS.js";import"./d3--x_RIlPQ.js";import"./highlight-oFPFMupF.js";import"./fancyapps-B9LBmYJj.js";import"./gsap-COmk0yTM.js";const ge={class:"simple-pdf-viewer"},_e={key:0,class:"pdf-placeholder"},ke={key:0,class:"pdf-controls"},he=["disabled"],be={class:"page-info"},ye=["disabled"],Ce={__name:"SimplePdfViewer",props:{src:{type:String,required:!0}},setup(U){const n=v(1),r=v(1),L=v(!1),y=v(null);J(()=>{const k=new IntersectionObserver(a=>{a[0].isIntersecting&&(L.value=!0,k.disconnect())},{rootMargin:"200px"});y.value&&k.observe(y.value)});function E(k){r.value=k.numPages}function D(){n.value>1&&n.value--}function x(){n.value<r.value&&n.value++}return(k,a)=>(t(),o("div",ge,[e("div",{class:"pdf-wrapper",ref_key:"pdfContainer",ref:y},[L.value?(t(),H(m(de),{key:1,source:U.src,page:n.value,onLoaded:E},null,8,["source","page"])):(t(),o("div",_e,[...a[0]||(a[0]=[e("div",{class:"loading-spinner"},null,-1),e("span",null,"Loading PDF...",-1)])]))],512),r.value>1?(t(),o("div",ke,[e("button",{class:"control-btn",onClick:D,disabled:n.value<=1,title:"Previous Page"},[...a[1]||(a[1]=[e("i",{class:"fas fa-chevron-left"},null,-1)])],8,he),e("span",be,_(n.value)+" / "+_(r.value),1),e("button",{class:"control-btn",onClick:x,disabled:n.value>=r.value,title:"Next Page"},[...a[2]||(a[2]=[e("i",{class:"fas fa-chevron-right"},null,-1)])],8,ye)])):f("",!0)]))}},we=ie(Ce,[["__scopeId","data-v-b7958289"]]),Le={class:"mil-content-frame"},xe={class:"mil-scroll mil-half-1 mil-bp-fix-2"},Pe={key:0,class:"mil-main-content"},Te={key:0,class:"mil-work-card mil-no-descr mil-mb-15"},Be=["href"],Fe=["src","alt"],Ae={class:"mil-project-description"},Ee={class:"mil-space-90 mil-p-90-75"},De={class:"row mil-mb-60 mil-up"},Me={class:"col-md-6"},Re={class:"mil-mb-30"},Se={class:"mil-lang-switch mil-mb-30"},Ve={class:"col-md-6 mil-jce mil-m-jcs mil-mb-30"},$e={key:0,class:"mil-badge mil-dark mil-mr-5"},je={class:"mil-badge"},ze=["innerHTML"],Ne={class:"mil-toc-menu mil-up-instant"},Ie={class:"mil-toc-list mil-scroll"},Oe=["onClick"],He={class:"mil-soft"},Ue={class:"row"},qe={key:0,class:"col-6 mil-up"},Ge={class:"mil-link"},Ye={key:1,class:"col-6 mil-jce mil-up"},Ze={class:"mil-link"},Je={key:1,class:"mil-pdf-section mil-mb-60 mil-up"},Ke={key:1,class:"mil-p-90-75"},We={class:"mil-bottom-panel mil-up-instant"},Qe={class:"mil-jcc mil-space-15 mil-w-100"},Xe={class:"mil-jcb mil-w-100 mil-p-30-0"},el={class:"mil-prev-nav"},ll={key:1,class:"mil-link mil-disabled",style:{opacity:"0.5"}},sl={class:"mil-bottom-centered"},tl={class:"mil-next-nav"},il={key:1,class:"mil-link mil-disabled",style:{opacity:"0.5"}},ol={class:"mil-action-list"},al=["title"],nl={key:0,class:"mil-toc-dot"},pl={__name:"PortfolioDetail",setup(U){const n=me(null);let r;const L=async()=>{if(!n.value){const s=await Y(()=>import("./markdown-Cr4Hflqh.js"),__vite__mapDeps([0,1,2]));n.value=s.default}},y=async()=>{r||(r=(await Y(()=>import("./mermaid-C-v3_poi.js").then(l=>l.m),__vite__mapDeps([3,4,2]))).default,r.initialize({startOnLoad:!1,theme:"base",themeVariables:{darkMode:!0,fontFamily:'"Outfit", sans-serif',fontSize:"14px",primaryColor:"#FFFFFF",primaryTextColor:"#121212",primaryBorderColor:"#DBA91C",nodeBorder:"#DBA91C",mainBkg:"#FFFFFF",rectRadius:"8",lineColor:"#DBA91C",defaultLinkColor:"#DBA91C",edgeLabelBackground:"#DBA91C",labelTextColor:"#121212",clusterBkg:"rgba(255, 255, 255, 0.05)",clusterBorder:"#444444",secondaryColor:"#DBA91C",tertiaryColor:"#1A1A1A",titleColor:"#E0E0E0"},flowchart:{htmlLabels:!0,curve:"basis"},securityLevel:"loose"})),await r.run()},E=ce(),D=ue(),{posts:x,getAdjacentPosts:k}=oe(),a=ae(),{currentLang:C}=ne(a),T=w(()=>E.params.id),i=w(()=>x.value.find(s=>s.slug===T.value&&s.type==="portfolio"&&s.lang===C.value)),B=k(T.value,"portfolio",C.value),M=w(()=>x.value.some(s=>s.slug===T.value&&s.type==="portfolio"&&s.lang==="en")),R=w(()=>x.value.some(s=>s.slug===T.value&&s.type==="portfolio"&&s.lang==="zh")),q=s=>{s==="zh"&&R.value&&a.setLang("zh"),s==="en"&&M.value&&a.setLang("en")},K=()=>{C.value==="zh"&&M.value?a.setLang("en"):C.value==="en"&&R.value&&a.setLang("zh")},W=w(()=>i.value&&n.value?n.value.render(i.value.body):""),F=w(()=>{if(!i.value)return[];const s=[];return i.value.body.split(`
`).forEach(c=>{const g=c.match(/^(#{1,6})\s+(.+)$/);if(g){const u=g[1].length,A=g[2].trim(),j=A.toLowerCase().trim().replace(/[^\u4e00-\u9fa5a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");s.push({level:u,title:A,slug:j})}}),s});v(!1);const h=v(!1),p=v(!1),S=()=>{h.value=!h.value,h.value&&(p.value=!1)},Q=()=>{p.value=!p.value,p.value&&(h.value=!1)},X=s=>{const l=document.getElementById(s);l&&(l.scrollIntoView({behavior:"smooth"}),h.value=!1)},P=v(!1),ee=()=>{P.value=!P.value,P.value?(document.body.classList.remove("mil-half-page"),document.body.classList.add("mil-fw-page")):(document.body.classList.remove("mil-fw-page"),document.body.classList.add("mil-half-page"))},V=v(!1),$=v(null),le=()=>{navigator.clipboard.writeText(window.location.href),V.value=!0,$.value&&$.value.show("Link copied to clipboard","success"),setTimeout(()=>{V.value=!1},2e3)},se=s=>{const l=s.target.closest("a");if(l&&l.getAttribute("href")){const c=new URL(l.href),g=window.location.origin;if(c.origin===g){let u=c.pathname;if(u.endsWith(".md")){s.preventDefault();const A=u.includes("/portfolio/"),j=u.includes("/blog/"),te=u.split("/"),z=decodeURIComponent(te.pop().replace(".md",""));A?u="/portfolio/"+z:j?u="/blog/"+z:u="/portfolio/"+z,D.push(u)}}else l.target="_blank"}},G=()=>{document.querySelectorAll(".copy-btn").forEach(l=>{l.addEventListener("click",()=>{const c=decodeURIComponent(l.getAttribute("data-code"));navigator.clipboard.writeText(c).then(()=>{const g=l.innerHTML;l.innerHTML='<i class="fas fa-check"></i> Copied',setTimeout(()=>{l.innerHTML=g},2e3)})})})};return J(()=>{Z(()=>{G(),L(),y()})}),ve(()=>{Z(()=>{G(),L(),y()})}),(s,l)=>(t(),o("div",Le,[I(re,{ref_key:"toastRef",ref:$},null,512),e("div",xe,[i.value?(t(),o("div",Pe,[i.value.image?(t(),o("div",Te,[e("a",{href:i.value.image,"data-fancybox":"gallery","data-no-swup":""},[e("img",{src:i.value.image,alt:i.value.title},null,8,Fe)],8,Be)])):f("",!0),e("div",Ae,[e("div",Ee,[e("div",De,[e("div",Me,[e("h1",Re,_(i.value.title),1),e("div",Se,[e("span",{class:d(["mil-lang-btn",{active:m(C)==="zh",disabled:!R.value}]),onClick:l[0]||(l[0]=c=>q("zh"))},"ZH",2),l[2]||(l[2]=e("span",{class:"mil-divider"},"/",-1)),e("span",{class:d(["mil-lang-btn",{active:m(C)==="en",disabled:!M.value}]),onClick:l[1]||(l[1]=c=>q("en"))},"EN",2)])]),e("div",Ve,[i.value.client?(t(),o("div",$e,_(i.value.client),1)):f("",!0),e("div",je,_(i.value.category),1)])]),e("div",{class:"mil-markdown-content mil-mb-60 mil-up",innerHTML:W.value,onClick:se},null,8,ze),e("div",{class:d(["mil-toc-backdrop",{"mil-active":h.value}]),onClick:S},null,2),F.value.length>0?(t(),o("div",{key:0,class:d(["mil-toc-wrapper",{"mil-toc-active":h.value}])},[e("div",Ne,[l[5]||(l[5]=e("div",{class:"mil-sheet-handle"},null,-1)),e("div",{class:"mil-toc-header"},[l[4]||(l[4]=e("span",{class:"mil-link"},"Contents",-1)),e("div",{class:"mil-toc-close",onClick:S},[...l[3]||(l[3]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("ul",Ie,[(t(!0),o(fe,null,pe(F.value,c=>(t(),o("li",{key:c.slug,class:d(["mil-toc-item","mil-level-"+c.level]),onClick:g=>X(c.slug)},[e("span",He,_(c.title),1)],10,Oe))),128))])])],2)):f("",!0),l[10]||(l[10]=e("div",{class:"mil-divider mil-mb-60 mil-up"},null,-1)),e("div",Ue,[i.value.client?(t(),o("div",qe,[e("div",Ge,[l[6]||(l[6]=e("span",{class:"mil-accent"},"client:",-1)),b(" "+_(i.value.client),1)])])):f("",!0),i.value.date?(t(),o("div",Ye,[e("div",Ze,[l[7]||(l[7]=e("span",{class:"mil-accent"},"date:",-1)),b(" "+_(i.value.date),1)])])):f("",!0)]),i.value.pdf?(t(),o("div",Je,[l[8]||(l[8]=e("div",{class:"mil-divider mil-mb-60"},null,-1)),l[9]||(l[9]=e("h3",{class:"mil-mb-30"},"Presentation Slides",-1)),I(we,{src:i.value.pdf},null,8,["src"])])):f("",!0)])])])):(t(),o("div",Ke,[...l[11]||(l[11]=[e("h1",null,"Project not found",-1)])])),e("div",We,[e("div",Qe,[e("div",Xe,[e("div",{class:"mil-action-trigger mil-icon-btn",onClick:le,title:"Copy Link",style:{"margin-right":"20px"}},[e("i",{class:d(["fas",V.value?"fa-check":"fa-share-alt"])},null,2)]),e("div",el,[m(B).prev?(t(),H(m(N),{key:0,to:"/portfolio/"+m(B).prev.slug,class:"mil-link mil-icon-link-left",title:"Previous Project"},{default:O(()=>[...l[12]||(l[12]=[e("i",{class:"fas fa-chevron-left"},null,-1),b(),e("span",null,"Previous",-1)])]),_:1},8,["to"])):(t(),o("span",ll,[...l[13]||(l[13]=[e("i",{class:"fas fa-chevron-left"},null,-1),b(),e("span",null,"Previous",-1)])]))]),e("div",sl,[I(m(N),{to:"/portfolio",class:"mil-link mil-back-btn"},{default:O(()=>[...l[14]||(l[14]=[b("Back to Portfolio",-1)])]),_:1})]),e("div",tl,[m(B).next?(t(),H(m(N),{key:0,to:"/portfolio/"+m(B).next.slug,class:"mil-link mil-icon-link",title:"Next Project"},{default:O(()=>[...l[15]||(l[15]=[e("span",null,"Next",-1),b(),e("i",{class:"fas fa-chevron-right"},null,-1)])]),_:1},8,["to"])):(t(),o("span",il,[...l[16]||(l[16]=[e("span",null,"Next",-1),b(),e("i",{class:"fas fa-chevron-right"},null,-1)])]))]),e("div",{class:d(["mil-action-menu-wrapper",{"mil-active":p.value}])},[e("div",ol,[F.value.length>0?(t(),o("div",{key:0,class:"mil-action-btn",onClick:S,title:"Table of Contents"},[...l[17]||(l[17]=[e("i",{class:"fas fa-list-ul"},null,-1)])])):f("",!0),e("div",{class:"mil-action-btn",onClick:K,title:"Switch Language"},[...l[18]||(l[18]=[e("i",{class:"fas fa-globe"},null,-1)])]),e("div",{class:"mil-action-btn",onClick:ee,title:P.value?"Original View":"Full Screen View"},[e("i",{class:d(["fas",P.value?"fa-compress-alt":"fa-expand-alt"])},null,2)],8,al)]),e("div",{class:d(["mil-action-trigger mil-icon-btn",{"mil-active":p.value}]),onClick:Q},[e("i",{class:d(["fas",p.value?"fa-times":"fa-ellipsis-v"])},null,2),!p.value&&F.value.length>0?(t(),o("span",nl)):f("",!0)],2)],2)])])])])]))}};export{pl as default};
